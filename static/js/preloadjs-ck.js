/**
* PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
**/(function(e){var t=function(){this.init()};t.prototype={};var n=t.prototype;n.loaded=!1;n.progress=0;n._item=null;n.onProgress=null;n.onLoadStart=null;n.onFileLoad=null;n.onFileProgress=null;n.onComplete=null;n.onError=null;n.getItem=function(){return this._item};n.init=function(){};n.load=function(){};n.cancel=function(){};n._sendLoadStart=function(){this.onLoadStart&&this.onLoadStart({target:this})};n._sendProgress=function(e){var t;if(e instanceof Number)this.progress=e,t={loaded:this.progress,total:1};else if(t=e,this.progress=e.loaded/e.total,isNaN(this.progress)||this.progress==Infinity)this.progress=0;t.target=this;this.onProgress&&this.onProgress(t)};n._sendFileProgress=function(e){this.onFileProgress&&(e.target=this,this.onFileProgress(e))};n._sendComplete=function(){this.onComplete&&this.onComplete({target:this})};n._sendFileComplete=function(e){this.onFileLoad&&(e.target=this,this.onFileLoad(e))};n._sendError=function(e){this.onError&&(e==null&&(e={}),e.target=this,this.onError(e))};n.toString=function(){return"[PreloadJS AbstractLoader]"};e.AbstractLoader=t})(window);(function(e){function t(){}var n=function(e){this.initialize(e)},r=n.prototype=new AbstractLoader;n.IMAGE="image";n.SOUND="sound";n.JSON="json";n.JAVASCRIPT="javascript";n.CSS="css";n.XML="xml";n.TEXT="text";n.TIMEOUT_TIME=8e3;r.useXHR=!0;r.stopOnError=!1;r.maintainScriptOrder=!0;r.next=null;r.typeHandlers=null;r.extensionHandlers=null;r._maxConnections=1;r._currentLoads=null;r._loadQueue=null;r._loadedItemsById=null;r._loadedItemsBySrc=null;r._targetProgress=0;r._numItems=0;r._numItemsLoaded=null;r._scriptOrder=null;r._loadedScripts=null;r.TAG_LOAD_OGGS=!0;r.initialize=function(t){this._targetProgress=this._numItemsLoaded=this._numItems=0;this._paused=!1;this._currentLoads=[];this._loadQueue=[];this._scriptOrder=[];this._loadedScripts=[];this._loadedItemsById={};this._loadedItemsBySrc={};this.typeHandlers={};this.extensionHandlers={};this.useXHR=t!=0&&e.XMLHttpRequest!=null;this.determineCapabilities()};r.determineCapabilities=function(){var e=n.lib.BrowserDetect;e!=null&&(n.TAG_LOAD_OGGS=e.isFirefox||e.isOpera)};n.isBinary=function(e){switch(e){case n.IMAGE:case n.SOUND:return!0;default:return!1}};r.installPlugin=function(e){if(e!=null&&e.getPreloadHandlers!=null){e=e.getPreloadHandlers();if(e.types!=null)for(var t=0,n=e.types.length;t<n;t++)this.typeHandlers[e.types[t]]=e.callback;if(e.extensions!=null)for(t=0,n=e.extensions.length;t<n;t++)this.extensionHandlers[e.extensions[t]]=e.callback}};r.setMaxConnections=function(e){this._maxConnections=e;this._paused||this._loadNext()};r.loadFile=function(e,t){this._addItem(e);t!==!1&&this.setPaused(!1)};r.loadManifest=function(e,t){var n;e instanceof Array?n=e:e instanceof Object&&(n=[e]);for(var r=0,i=n.length;r<i;r++)this._addItem(n[r],!1);t!==!1&&this._loadNext()};r.load=function(){this.setPaused(!1)};r.getResult=function(e){return this._loadedItemsById[e]||this._loadedItemsBySrc[e]};r.setPaused=function(e){(this._paused=e)||this._loadNext()};r.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._currentLoads=[];this._scriptOrder=[];this._loadedScripts=[]};r._addItem=function(e){e=this._createLoadItem(e);e!=null&&(this._loadQueue.push(e),this._numItems++,this._updateProgress(),e.getItem().type==n.JAVASCRIPT&&(this._scriptOrder.push(e.getItem()),this._loadedScripts.push(null)))};r._loadNext=function(){if(!this._paused){this._loadQueue.length==0&&(this._sendComplete(),this.next&&this.next.load&&this.next.load.apply(this.next));for(;this._loadQueue.length&&this._currentLoads.length<this._maxConnections;){var e=this._loadQueue.shift();e.onProgress=n.proxy(this._handleProgress,this);e.onComplete=n.proxy(this._handleFileComplete,this);e.onError=n.proxy(this._handleFileError,this);this._currentLoads.push(e);e.load()}}};r._handleFileError=function(e){var e=e.target,t=this._createResultData(e.getItem());this._numItemsLoaded++;this._updateProgress();this._sendError(t);this.stopOnError||(this._removeLoadItem(e),this._loadNext())};r._createResultData=function(e){return{id:e.id,result:null,data:e.data,type:e.type,src:e.src}};r._handleFileComplete=function(e){this._numItemsLoaded++;var e=e.target,t=e.getItem();this._removeLoadItem(e);var r=this._createResultData(t);r.result=e instanceof n.lib.XHRLoader?this._createResult(t,e.getResult()):t.tag;this._loadedItemsById[t.id]=r;this._loadedItemsBySrc[t.src]=r;var i=this;switch(t.type){case n.IMAGE:if(e instanceof n.lib.XHRLoader){r.result.onload=function(){i._handleFileTagComplete(t,r)};return}break;case n.JAVASCRIPT:if(this.maintainScriptOrder){this._loadedScripts[this._scriptOrder.indexOf(t)]=t;this._checkScriptLoadOrder();return}}this._handleFileTagComplete(t,r)};r._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;t<e;t++){var n=this._loadedScripts[t];if(n===null)break;if(n!==!0){var n=this.getResult(n.src),r=this._createResultData(n);r.result=n.result;this._handleFileTagComplete(n,r);this._loadedScripts[t]=!0;t--;e--}}};r._handleFileTagComplete=function(e,t){e.completeHandler&&e.completeHandler(t);this._updateProgress();this._sendFileComplete(t);this._loadNext()};r._removeLoadItem=function(e){for(var t=this._currentLoads.length,n=0;n<t;n++)if(this._currentLoads[n]==e){this._currentLoads.splice(n,1);break}};r._createResult=function(t,r){var i=null,s;switch(t.type){case n.IMAGE:i=this._createImage();break;case n.SOUND:i=t.tag||this._createAudio();break;case n.CSS:i=this._createLink();break;case n.JAVASCRIPT:i=this._createScript();break;case n.XML:if(e.DOMParser){var o=new DOMParser;o.parseFromString(r,"text/xml")}else o=new ActiveXObject("Microsoft.XMLDOM"),o.async=!1,o.loadXML(r),s=o;break;case n.JSON:case n.TEXT:s=r}return i?(t.type==n.CSS?i.href=t.src:i.src=t.src,i):s};r._handleProgress=function(e){var e=e.target,t=this._createResultData(e.getItem());t.progress=e.progress;this._sendFileProgress(t);this._updateProgress()};r._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(t>0){for(var n=0,r=0,i=this._currentLoads.length;r<i;r++)n+=this._currentLoads[r].progress;e+=n/t*(t/this._numItems)}this._sendProgress({loaded:e,total:1})};r._createLoadItem=function(e){var t={};switch(typeof e){case"string":t.src=e;break;case"object":e instanceof HTMLAudioElement?(t.tag=e,t.src=t.tag.src,t.type=n.SOUND):t=e}t.ext=this._getNameAfter(t.src,".");t.type||(t.type=this.getType(t.ext));if(t.id==null||t.id=="")t.id=t.src;if(e=this.typeHandlers[t.type]||this.extensionHandlers[t.ext]){e=e(t.src,t.type,t.id,t.data);if(e===!1)return null;if(e!==!0){e.src!=null&&(t.src=e.src);e.id!=null&&(t.id=e.id);e.tag!=null&&e.tag.load instanceof Function&&(t.tag=e.tag)}t.ext=this._getNameAfter(t.src,".")}e=this.useXHR;switch(t.type){case n.JSON:case n.XML:case n.TEXT:e=!0;break;case n.SOUND:t.ext=="ogg"&&n.TAG_LOAD_OGGS&&(e=!1)}if(e)return new n.lib.XHRLoader(t);if(t.tag)return new n.lib.TagLoader(t);var r,e="src",i=!1;switch(t.type){case n.IMAGE:r=this._createImage();break;case n.SOUND:r=this._createAudio();break;case n.CSS:e="href";i=!0;r=this._createLink();break;case n.JAVASCRIPT:i=!0,r=this._createScript()}t.tag=r;return new n.lib.TagLoader(t,e,i)};r.getType=function(e){switch(e){case"jpeg":case"jpg":case"gif":case"png":return n.IMAGE;case"ogg":case"mp3":case"wav":return n.SOUND;case"json":return n.JSON;case"xml":return n.XML;case"css":return n.CSS;case"js":return n.JAVASCRIPT;default:return n.TEXT}};r._getNameAfter=function(e,t){var n=e.lastIndexOf(t),n=e.substr(n+1),r=n.lastIndexOf(/[\b|\?|\#|\s]/);return r==-1?n:n.substr(0,r)};r._createImage=function(){return document.createElement("img")};r._createAudio=function(){var e=document.createElement("audio");e.autoplay=!1;e.type="audio/ogg";return e};r._createScript=function(){var e=document.createElement("script");e.type="text/javascript";return e};r._createLink=function(){var e=document.createElement("link");e.type="text/css";e.rel="stylesheet";return e};r.toString=function(){return"[PreloadJS]"};n.proxy=function(e,t){return function(n){return e.apply(t,arguments)}};n.lib={};e.PreloadJS=n;t.init=function(){var n=navigator.userAgent;t.isFirefox=n.indexOf("Firefox")>-1;t.isOpera=e.opera!=null;t.isIOS=n.indexOf("iPod")>-1||n.indexOf("iPhone")>-1||n.indexOf("iPad")>-1};t.init();n.lib.BrowserDetect=t})(window);(function(){var e=function(e,t,n){this.init(e,t,n)},t=e.prototype=new AbstractLoader;t._srcAttr=null;t._loadTimeOutTimeout=null;t.tagCompleteProxy=null;t.init=function(e,t,n){this._item=e;this._srcAttr=t||"src";this._useXHR=n==1;this.isAudio=e.tag instanceof HTMLAudioElement;this.tagCompleteProxy=PreloadJS.proxy(this._handleTagLoad,this)};t.cancel=function(){this._clean();var e=this.getItem();e!=null&&(e.src=null)};t.load=function(){this._useXHR?this.loadXHR():this.loadTag()};t.loadXHR=function(){var e=this.getItem(),e=new PreloadJS.lib.XHRLoader(e);e.onProgress=PreloadJS.proxy(this._handleProgress,this);e.onFileLoad=PreloadJS.proxy(this._handleXHRComplete,this);e.onFileError=PreloadJS.proxy(this._handleLoadError,this);e.load()};t._handleXHRComplete=function(e){this._clean();var t=e.getItem();e.getResult();t.type==PreloadJS.IMAGE?(t.tag.onload=PreloadJS.proxy(this._sendComplete,this),t.tag.src=t.src):(t.tag[this._srcAttr]=t.src,this._sendComplete())};t._handleLoadError=function(e){this._clean();this._sendError(e)};t.loadTag=function(){var e=this.getItem(),t=e.tag;clearTimeout(this._loadTimeOutTimeout);this._loadTimeOutTimeout=setTimeout(PreloadJS.proxy(this._handleLoadTimeOut,this),PreloadJS.TIMEOUT_TIME);this.isAudio&&(t.src=null,t.preload="auto",t.setAttribute("data-temp","true"));t.onerror=PreloadJS.proxy(this._handleLoadError,this);t.onprogress=PreloadJS.proxy(this._handleProgress,this);this.isAudio?(t.onstalled=PreloadJS.proxy(this._handleStalled,this),t.addEventListener("canplaythrough",this.tagCompleteProxy)):t.onload=PreloadJS.proxy(this._handleTagLoad,this);t[this._srcAttr]=e.src;e=e.type==PreloadJS.SOUND&&e.ext=="ogg"&&PreloadJS.lib.BrowserDetect.isFirefox;t.load!=null&&!e&&t.load()};t._handleLoadTimeOut=function(){this._clean();this._sendError()};t._handleStalled=function(){};t._handleLoadError=function(){this._clean();this._sendError()};t._handleTagLoad=function(){var e=this.getItem().tag;clearTimeout(this._loadTimeOutTimeout);(!this.isAudio||e.readyState===4)&&!this.loaded&&(this.loaded=!0,this._clean(),this._sendComplete())};t._clean=function(){clearTimeout(this._loadTimeOutTimeout);var e=this.getItem().tag;e.onload=null;e.removeEventListener("canplaythrough",this.tagCompleteProxy);e.onstalled=null;e.onprogress=null;e.onerror=null};t._handleProgress=function(e){clearTimeout(this._loadTimeOutTimeout);if(this.isAudio){e=this.getItem();if(e.buffered==null)return;e={loaded:e.buffered.length>0?e.buffered.end(0):0,total:e.duration}}this._sendProgress(e)};t.toString=function(){return"[PreloadJS TagLoader]"};PreloadJS.lib.TagLoader=e})(window);(function(e){var t=function(e){this.init(e)},n=t.prototype=new AbstractLoader;n._wasLoaded=!1;n._request=null;n._loadTimeOutTimeout=null;n._xhrLevel=null;n.init=function(e){this._item=e;this._createXHR(e)};n.getResult=function(){try{return this._request.responseText}catch(e){}return this._request.response};n.cancel=function(){this._clean();this._request.abort()};n.load=function(){if(this._request==null)this.handleError();else{this._xhrLevel==1&&(this._loadTimeOutTimeout=setTimeout(PreloadJS.proxy(this.handleTimeout,this),PreloadJS.TIMEOUT_TIME));this._request.onloadstart=PreloadJS.proxy(this.handleLoadStart,this);this._request.onprogress=PreloadJS.proxy(this.handleProgress,this);this._request.onabort=PreloadJS.proxy(this.handleAbort,this);this._request.onerror=PreloadJS.proxy(this.handleError,this);this._request.ontimeout=PreloadJS.proxy(this.handleTimeout,this);this._request.onload=PreloadJS.proxy(this.handleLoad,this);this._request.onreadystatechange=PreloadJS.proxy(this.handleReadyStateChange,this);try{this._request.send()}catch(e){}}};n.handleProgress=function(e){e.loaded>0&&e.total==0||this._sendProgress({loaded:e.loaded,total:e.total})};n.handleLoadStart=function(){clearTimeout(this._loadTimeOutTimeout);this._sendLoadStart()};n.handleAbort=function(){this._clean();this._sendError()};n.handleError=function(){this._clean();this._sendError()};n.handleReadyStateChange=function(){this._request.readyState==4&&this.handleLoad()};n._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return!1}if(this._request.response==null){try{if(this._request.responseXML!=null)return!0}catch(e){}return!1}return!0};n.handleLoad=function(){this.loaded||(this.loaded=!0,this._checkError()?(this._clean(),this._sendComplete()):this.handleError())};n.handleTimeout=function(){this._clean();this._sendError()};n.handleLoadEnd=function(){this._clean()};n._createXHR=function(t){this._xhrLevel=1;e.ArrayBuffer&&(this._xhrLevel=2);if(e.XMLHttpRequest)this._request=new XMLHttpRequest;else try{this._request=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(n){return null}t.type==PreloadJS.TEXT&&this._request.overrideMimeType("text/plain; charset=x-user-defined");this._request.open("GET",t.src,!0);PreloadJS.isBinary(t.type)&&(this._request.responseType="arraybuffer");return!0};n._clean=function(){clearTimeout(this._loadTimeOutTimeout);var e=this._request;e.onloadstart=null;e.onprogress=null;e.onabort=null;e.onerror=null;e.onload=null;e.ontimeout=null;e.onloadend=null;e.onreadystatechange=null;clearInterval(this._checkLoadInterval)};n.toString=function(){return"[PreloadJS XHRLoader]"};PreloadJS.lib.XHRLoader=t})(window);